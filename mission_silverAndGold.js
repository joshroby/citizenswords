var mission_silverAndGold = {
	"title":"Silver and Gold",
	"description":"Hellpuppy's old stomping grounds is a newly-breached entrance to the underground rivers of Skogland, the Silver and the Gold.  There are rumors of royal vaults all along those rivers, which would make lucrative looting for your company of freelancers.",
	"difficulty":100,
	key:"mission_hellhoundCave",
	"bounds":{"minX":2.5,"maxX":27.5,"minY":-6,"maxY":6},
	"startLoc":{"x":11,"y":0},
	"teams":{
		"owlbears":{hostile:['p1']},
	},
	"tileBackgroundFills":[
		{fill:"darkgray"},
		{fill:"forestgreen",locs:[{"x":5,"y":-2},{"x":6,"y":-2},{"x":7,"y":-2},{"x":3.5,"y":-1},{"x":6.5,"y":-1},{"x":3,"y":0},{"x":5,"y":0},{"x":6,"y":0},{"x":4.5,"y":1},{"x":5.5,"y":1},{"x":6.5,"y":1},{"x":5,"y":2},{"x":4,"y":4},{"x":5,"y":4},{"x":4.5,"y":5},{"x":4,"y":6},{"x":5,"y":6},{"x":6,"y":6},{"x":2.5,"y":-1},{"x":5.5,"y":-3},{"x":6.5,"y":-3},{"x":7.5,"y":-3},{"x":7,"y":-4},{"x":8,"y":-4},{"x":8.5,"y":-3},{"x":9.5,"y":-3},{"x":10.5,"y":-3},{"x":11.5,"y":-3},{"x":12,"y":-4},{"x":11,"y":-4},{"x":9.5,"y":-5},{"x":10,"y":-6},{"x":11,"y":-6},{"x":12,"y":-6},{"x":9,"y":-6},{"x":8,"y":-6},{"x":7,"y":-6},{"x":6,"y":-6},{"x":5,"y":-6},{"x":3,"y":-6},{"x":2.5,"y":-5},{"x":4.5,"y":-5},{"x":5.5,"y":-5},{"x":3.5,"y":-5},{"x":4,"y":-4},{"x":2.5,"y":-3},{"x":3.5,"y":-3},{"x":3,"y":-4},{"x":4,"y":-6}]},
		{fill:"olivedrab",locs:[{"x":2.5,"y":1}]},
		{fill:"lightseagreen",locs:[{"x":4.5,"y":-1},{"x":4,"y":0},{"x":3.5,"y":1},{"x":3,"y":2},{"x":3,"y":4},{"x":2.5,"y":5},{"x":3.5,"y":5},{"x":3,"y":6},{"x":2.5,"y":3},{"x":4,"y":-2},{"x":4.5,"y":-3},{"x":5,"y":-4},{"x":6,"y":-4},{"x":6.5,"y":-5},{"x":7.5,"y":-5},{"x":8.5,"y":-5},{"x":10,"y":-4},{"x":9,"y":-4},{"x":10.5,"y":-5},{"x":11.5,"y":-5},{"x":12.5,"y":-5},{"x":13.5,"y":-5}]},
		{fill:"navy",locs:[{"x":13,"y":-2},{"x":14,"y":-2},{"x":15,"y":-2},{"x":16,"y":-2},{"x":12.5,"y":-1},{"x":13.5,"y":-1},{"x":14.5,"y":-1},{"x":15.5,"y":-1},{"x":16.5,"y":-1},{"x":13,"y":0},{"x":14,"y":0},{"x":15,"y":0},{"x":16,"y":0},{"x":13.5,"y":1},{"x":14.5,"y":1},{"x":15.5,"y":1},{"x":14,"y":2},{"x":15,"y":2},{"x":13.5,"y":3},{"x":14.5,"y":3},{"x":14,"y":4},{"x":14.5,"y":5},{"x":15,"y":6},{"x":13.5,"y":-3},{"x":14,"y":-4},{"x":15,"y":-4},{"x":14.5,"y":-3},{"x":15.5,"y":-3},{"x":14.5,"y":-5},{"x":15.5,"y":-5},{"x":16.5,"y":-5},{"x":17,"y":-6},{"x":16,"y":-6},{"x":18,"y":-6},{"x":19,"y":-6}]},
		{fill:"hsl(218.45650746936838deg 2.9470074830632296% 44.578882895680074%)",locs:[{"x":24,"y":2},{"x":24.5,"y":1},{"x":24.5,"y":3},{"x":23.5,"y":3},{"x":24,"y":4},{"x":23,"y":4},{"x":22.5,"y":3},{"x":24.5,"y":-1},{"x":26.5,"y":-1},{"x":26.5,"y":-3},{"x":26.5,"y":-5},{"x":25.5,"y":-5},{"x":23.5,"y":-3},{"x":22,"y":-4},{"x":21,"y":-4},{"x":21.5,"y":-5},{"x":25,"y":2},{"x":21,"y":2},{"x":19.5,"y":3},{"x":20.5,"y":5},{"x":20,"y":0},{"x":19,"y":0},{"x":22,"y":-2},{"x":19.5,"y":-3},{"x":20.5,"y":-1},{"x":17,"y":2},{"x":17,"y":4},{"x":18.5,"y":3},{"x":17.5,"y":5},{"x":22.5,"y":5},{"x":19,"y":6},{"x":22,"y":6},{"x":26,"y":-6},{"x":25,"y":-6},{"x":27,"y":-6},{"x":27.5,"y":-5},{"x":27,"y":-4},{"x":27.5,"y":-3},{"x":27,"y":-2},{"x":27.5,"y":-1},{"x":27,"y":0},{"x":27.5,"y":1},{"x":27,"y":2},{"x":27.5,"y":3},{"x":27,"y":4},{"x":27.5,"y":5},{"x":27,"y":6},{"x":26,"y":6},{"x":26.5,"y":5},{"x":25.5,"y":3},{"x":25,"y":4},{"x":24.5,"y":5},{"x":23.5,"y":5},{"x":23,"y":6},{"x":18.5,"y":5},{"x":20,"y":4},{"x":21,"y":4},{"x":23,"y":2},{"x":24,"y":0},{"x":23,"y":-2},{"x":24,"y":-2},{"x":22.5,"y":-3},{"x":20.5,"y":1},{"x":20,"y":-4},{"x":24,"y":-6}]}],
	"standees":[
		{type:"heroes",locs:[{"x":11,"y":0},{"x":11.5,"y":-1},{"x":10,"y":0},{"x":10.5,"y":-1},{"x":9,"y":0},{"x":9.5,"y":-1},{"x":8,"y":0}]},
		{type:"landscape",key:"bushes",locs:[{"x":5,"y":-2},{"x":7,"y":-2},{"x":3,"y":0},{"x":5,"y":0},{"x":6.5,"y":1},{"x":4,"y":6},{"x":5,"y":-6},{"x":9,"y":-6},{"x":7,"y":-6},{"x":10,"y":-6},{"x":11.5,"y":-3},{"x":11,"y":-4},{"x":12,"y":-4},{"x":12,"y":-6},{"x":9.5,"y":-3},{"x":8.5,"y":-3},{"x":8,"y":-4},{"x":6.5,"y":-3}]},
		{type:"landscape",key:"signpost",locs:[{"x":3.5,"y":3},{"x":24,"y":6},{"x":20,"y":-6}]},
		{type:"landscape",key:"trees",locs:[{"x":3,"y":-2},{"x":6,"y":-2},{"x":3,"y":-4},{"x":3.5,"y":-5},{"x":4,"y":-6},{"x":3,"y":-6},{"x":2.5,"y":-5},{"x":9.5,"y":-5},{"x":6,"y":-6},{"x":8,"y":-6},{"x":11,"y":-6}]},
		{type:"landscape",key:"boulder",locs:[{"x":5.5,"y":-1},{"x":16,"y":0},{"x":11.5,"y":1},{"x":4,"y":2},{"x":3,"y":4},{"x":9.5,"y":5},{"x":13.5,"y":-5},{"x":13,"y":-6},{"x":12.5,"y":-5},{"x":14.5,"y":-5},{"x":15.5,"y":-3},{"x":17.5,"y":-5},{"x":18.5,"y":-5},{"x":22.5,"y":-3},{"x":23.5,"y":-5}]},
		{type:"landscape",key:"rockface",locs:[{"x":8,"y":-2},{"x":9,"y":-2},{"x":10,"y":-2},{"x":11,"y":-2},{"x":12,"y":-2},{"x":17,"y":-2},{"x":18,"y":-2},{"x":7.5,"y":-1},{"x":8.5,"y":-1},{"x":18.5,"y":-1},{"x":7,"y":0},{"x":18,"y":0},{"x":7.5,"y":1},{"x":9.5,"y":1},{"x":10.5,"y":1},{"x":6,"y":2},{"x":7,"y":2},{"x":9,"y":2},{"x":16,"y":2},{"x":5.5,"y":3},{"x":6.5,"y":3},{"x":9.5,"y":3},{"x":10.5,"y":3},{"x":11.5,"y":3},{"x":12.5,"y":3},{"x":15.5,"y":3},{"x":6,"y":4},{"x":11,"y":4},{"x":13,"y":4},{"x":15,"y":4},{"x":12.5,"y":5},{"x":15.5,"y":5},{"x":7,"y":6},{"x":11,"y":6},{"x":12,"y":6},{"x":16,"y":6},{"x":18.5,"y":1},{"x":18,"y":2},{"x":20,"y":-4},{"x":20.5,"y":-3},{"x":12.5,"y":-3},{"x":13,"y":-4},{"x":14,"y":-6},{"x":15,"y":-6},{"x":19.5,"y":1},{"x":21,"y":0},{"x":20.5,"y":1},{"x":21.5,"y":-3},{"x":23,"y":-2},{"x":23.5,"y":-1},{"x":24,"y":0},{"x":18.5,"y":5},{"x":19.5,"y":5},{"x":20,"y":4},{"x":21,"y":4},{"x":19.5,"y":-5},{"x":20.5,"y":-5},{"x":23.5,"y":1},{"x":23,"y":-6},{"x":24.5,"y":5},{"x":23,"y":6},{"x":23.5,"y":5},{"x":23,"y":2},{"x":25.5,"y":3},{"x":25,"y":4},{"x":26,"y":6},{"x":27.5,"y":3},{"x":27,"y":4},{"x":27,"y":2},{"x":27.5,"y":1},{"x":27,"y":0},{"x":27.5,"y":-1},{"x":27,"y":-2},{"x":24,"y":-2},{"x":24.5,"y":-3},{"x":27.5,"y":-3},{"x":27,"y":-6},{"x":27.5,"y":-5},{"x":27,"y":-4},{"x":26,"y":-6},{"x":25,"y":-6},{"x":24,"y":-6},{"x":27.5,"y":5},{"x":27,"y":6}]},
		{type:"landscape",key:"riverStones",locs:[{"x":3,"y":2}]},
		{type:"thing",key:"chest","inventory":[],"lootable":true,locs:[{"x":13,"y":2}]},
		{type:"thing",key:"chest","inventory":['fineClothes','fineClothes','fineNecklace'],"lootable":true,locs:[{"x":16,"y":-4}]},
		{type:"landscape",key:"makeshiftBridge",locs:[{"x":13.5,"y":1},{"x":15.5,"y":1},{"x":14.5,"y":1}]},
		{type:"landscape",key:"ash",locs:[{x:17,y:2}]},
		{type:"pawn","id":"owlbear",locs:[{"x":19,"y":0},{"x":20,"y":0},{"x":21,"y":-4},{"x":20.5,"y":5}],"team":"owlbears"}
	],
	"moveCosts":[
		{moveCost:2,locs:[]},
		{moveCost:Infinity,locs:[{"x":4.5,"y":-1},{"x":4,"y":0},{"x":3.5,"y":1},{"x":3.5,"y":5},{"x":3,"y":6},{"x":16,"y":-2},{"x":12.5,"y":-1},{"x":16.5,"y":-1},{"x":13,"y":0},{"x":14,"y":0},{"x":15,"y":0},{"x":16,"y":0},{"x":13.5,"y":1},{"x":14.5,"y":1},{"x":15.5,"y":1},{"x":14,"y":2},{"x":15,"y":2},{"x":13.5,"y":3},{"x":14.5,"y":3},{"x":14,"y":4},{"x":14.5,"y":5},{"x":15,"y":6},{"x":2.5,"y":3},{"x":3,"y":2},{"x":4,"y":-2},{"x":4.5,"y":-3},{"x":5,"y":-4},{"x":6.5,"y":-5},{"x":7.5,"y":-5},{"x":6,"y":-4},{"x":8.5,"y":-5},{"x":9,"y":-4},{"x":10,"y":-4},{"x":10.5,"y":-5},{"x":11.5,"y":-5},{"x":15.5,"y":-3},{"x":15,"y":-4},{"x":15.5,"y":-5},{"x":16.5,"y":-5},{"x":17,"y":-6}]},
		{moveCost:3,locs:[{"x":17,"y":-4},{"x":17.5,"y":-1},{"x":17,"y":0},{"x":16.5,"y":1},{"x":20.5,"y":5},{"x":19,"y":0},{"x":20,"y":0},{"x":26,"y":4},{"x":25.5,"y":5},{"x":25,"y":6},{"x":24,"y":6},{"x":26.5,"y":3},{"x":26.5,"y":-1},{"x":24.5,"y":-1},{"x":26,"y":2},{"x":26.5,"y":1},{"x":26.5,"y":-5},{"x":23.5,"y":-3},{"x":22,"y":-2}]},
		{moveCost:5,locs:[{"x":13.5,"y":1},{"x":15.5,"y":1},{"x":14.5,"y":1}]},
	],
	"cameraStart":{"x":-1000,"y":-1000},
	heroStarts: {
		fromSouth: [{"x":24,"y":6},{"x":25,"y":6},{"x":25.5,"y":5},{"x":26.5,"y":5},{"x":26,"y":4},{"x":26.5,"y":3},{"x":26,"y":2}],
	},
	"triggers":[
		{event:'onload',check:'load'},
		{event:'tpk',type:'team defeat',team:'p1'},
		{event:'citySignpost',check:'heroes',locs:[{x:3.5,y:3}]},
		{event:'southSignpost',check:'heroes',locs:[{x:24,y:6}]},
		{event:'northSignpost',check:'heroes',locs:[{x:20,y:-6}]},
		{event:'bridge',check:'heroes',locs:[{x:12,y:0}]},
		{event:'bridgeCheck',check:'heroes',locs:[{x:13.5,y:1},{x:14.5,y:1},{x:15.5,y:1}]},
		{event:'scat',check:'heroes',locs:[{x:17,y:2}]},
		{event:'owlbearSpotted',type:'pawn sighted',id:'owlbear'},
		{event:'owlbearAttack',type:'target acquired',team:'p1'},
		{event:'source',check:'heroes',locs:[{x:12,y:-4}]},
	],
	"checks":{
		always: function() {return true},
		heroes: function(pawn) {return game.map.heroes.indexOf(pawn) !== -1},
	},
	"flags":{
		introSGBridge: false,
		scat: 0,
	},
	"events":{
		onload: function(pawn,tile) {
			console.log('Level Loaded.');
		},
		tpk: function() {
			view.gameOver();
		},
		citySignpost: function() {
			game.signpost();
		},
		northSignpost: function() {
			game.signpost('mission_OwlbearLab',undefined,'Venture North',"You've found a passage leading north along the Silver river.","This passage leads north along the Silver river to the Owlbear Lab.");
		},
		southSignpost: function() {
			game.signpost('mission_southSilverVault',undefined,'Venture South',"You've found a passage leading south along the Silver river.","This passage leads south along the Silver river to... well, not a lot.");
		},
		bridge: function() {
			var p1 = game.map.heroes[0];
			var p2 = game.map.heroes[1];
			if (game.players[0].plotkeys.introSGBridge == undefined && game.currentMission.flags.introSGBridge == false) {
				gamen.displayPassage(new Passage("Remind me to thank Nosh for all this scrap lumber.  It makes a perfectly serviceable bridge.",undefined,true,p1.name,p1.avatar.svg('bust'),'left'));
				gamen.displayPassage(new Passage("If by 'serviceable' you mean 'just slightly more safe than amateur lion taming'.",undefined,true,p2.name,p2.avatar.svg('bust'),'right'));
				gamen.displayPassage(new Passage("If we've really found a backdoor onto the Silver and Gold rivers and all the royal vaults hidden along them, I'll build you a gold-plated bridge over any dribble of water you name.",undefined,true,p1.name,p1.avatar.svg('bust'),'left'));
				game.currentMission.flags.introSGBridge = true;
				game.players[0].plotkeys.introSGBridge = true;
			} else if (game.players[0].plotkeys.introSGBridge && game.currentMission.flags.introSGBridge == false) {
				gamen.displayPassage(new Passage("That bridge remains my least favorite part of this plan.",undefined,true,p2.name,p2.avatar.svg('bust'),'right'));
			};
		},
		bridgeCheck: function(pawn,tile) {
			var saveCheck = pawn.roll('move');
// 			console.log('Bridge save check: ',saveCheck);
			if (saveCheck < 2) {
				pawn.takeWound({stat:'focus',name:'cold',type:'wound',strength:-1});
				messages = [
					"Whoops-- oh <em>wow</em> is that water cold!  My foot just slipped in for a second and it's like ice.",
					"Oh no, I-- *splash!* Six gods, that's cold!",
					"I'm being very careful, here, but I can't help but notice that my very careful steps are still dipping the tips of my toes in the... <em>very cold water.</em>",
					"Nurse's Girdle, my whole foot went in to the ankle and now I can barely feel it.",
				];
				if (pawn.id == 'hellpuppy') {messages = []};
			} else {
				messages = [
					"Ope!",
					"Whoa now.",
					"Be sure to... take your time...",
					"One foot... in front of the other...",
					"Slow and steady... wins the... something...",
				];
				if (pawn.id == 'hellpuppy') {messages = []};
			};
			if (messages.length > 0) {
				gamen.displayPassage(new Passage(messages[messages.length * Math.random() << 0],undefined,true,pawn.name,pawn.avatar.svg('bust','surprise'),'left'));
			};
		},
		scat: function(pawn,tile) {
			game.currentMission.flags.scat++;
			if (game.currentMission.flags.scat == 1) {
				var conversation = [];
				for (var hero of game.map.heroes) {
					if (hero.id !== 'hellpuppy') {conversation.push(hero)};
				};
				if (conversation.indexOf('pawn') !== -1) {
					conversation.splice(conversation.indexOf(pawn),1);
				};
				var p2 = conversation[0];
				var p3 = conversation[1];
				if (pawn.id == 'hellpuppy') {
					gamen.displayPassage(new Passage("*sniff* *sniff* *sniff*",undefined,true,pawn.name,pawn.avatar.svg(),'left'));
					gamen.displayPassage(new Passage("What have you found, you adorable little fluffball?",undefined,true,p3.name,p3.avatar.svg('bust','curious'),'left'));
				} else {
					p3 = pawn;
					gamen.displayPassage(new Passage("What did I just step in?",undefined,true,p3.name,p3.avatar.svg('bust','disgust'),'left'));
				};
				gamen.displayPassage(new Passage("Opportunity?",undefined,true,p2.name,p2.avatar.svg('bust','cocky'),'right'));
				gamen.displayPassage(new Passage("No, this looks like... feces.  Specifically, this looks like bear scat.",undefined,true,p3.name,p3.avatar.svg('bust','disgust'),'left'));
				gamen.displayPassage(new Passage("Like you know what bear scat looks like, city slicker.  Can't be.  There are no bears in this cave.  They wouldn't be able to get across the river to hunt or forage.",undefined,true,p2.name,p2.avatar.svg('bust','unamused'),'right'));
				if (pawn.id == 'hellpuppy') {
					gamen.displayPassage(new Passage("Then I have no idea what... left this.",undefined,true,p3.name,p3.avatar.svg('bust','worry'),'left'));
				} else {
					gamen.displayPassage(new Passage("Tell that to my shoes.",undefined,true,pawn.name,pawn.avatar.svg('bust','disgust'),'left'));
				};
			} else if (pawn.id !== 'hellpuppy') {
				var index = game.currentMission.flags.scat - 2;
				if (index > 3) {index = Math.random() * 4 << 0;};
				gamen.displayPassage(new Passage(["Lovely.","You just have to step... carefully.","Yeah, this is foul.",'Adventure!'][index],undefined,true,pawn.name,pawn.avatar.svg('bust','disgust'),'left'));
			};
		},
		owlbearSpotted: function(owlbear,pawn) {
			if (game.players[0].plotkeys.owlbearsSighted == undefined) {
				var heroes = [];
				for (var hero of game.map.heroes) {
					if (hero !== pawn && hero.id !== 'hellpuppy') {
						heroes.push(hero);
					};
				};
				var p2 = heroes[heroes.length * Math.random() << 0];
				var timedEvent = setTimeout(view.panToTile.bind(this,owlbear.tile,true),100);
				if (pawn.id == 'hellpuppy') {
					gamen.displayPassage(new Passage("Bark bark bark grrrrrrrr...",undefined,true,pawn.name,pawn.avatar.svg(),'right'));
					gamen.displayPassage(new Passage("What is it?  Did you spot something?",undefined,true,p2.name,p2.avatar.svg('bust','curious'),'left'));
				} else {
					game.players[0].plotkeys.owlbearsSighted = true;
					gamen.displayPassage(new Passage("What in the unholy hell is that thing?!?",undefined,true,pawn.name,pawn.avatar.svg('bust','horror'),'right'));
					gamen.displayPassage(new Passage("What? What?  I'm coming your way, tell me what you see!",undefined,true,p2.name,p2.avatar.svg('bust','curious'),'left'));
					gamen.displayPassage(new Passage("I don't even know what I'm looking at.  It's... big.  And furry.  And also feathery?  I'm so confused right now.  But I think I know what left that pile of feces, and I'm pretty sure bears can get over a rushing underground river if they've got wings.",undefined,true,pawn.name,pawn.avatar.svg('bust','horror'),'right'));
					gamen.displayPassage(new Passage("Bears with wings?  You're not making any sense.",undefined,true,p2.name,p2.avatar.svg('bust','unamused'),'left'));
					gamen.displayPassage(new Passage("I KNOW.",undefined,true,pawn.name,pawn.avatar.svg('bust','angry'),'right'));
				};
			};
		},
		owlbearAttack: function(target,owlbear) {
			if (game.currentMission.flags.owlbearsAttack == undefined) {
				game.currentMission.flags.owlbearsAttack = true;
				gamen.displayPassage(new Passage("WHARBLE GRARRBUH WHOOOT WHOOOT WHOOOOOO!",undefined,true,owlbear.name,owlbear.avatar.svg(),'right'));
				if (target.id !== 'hellpuppy') {
					gamen.displayPassage(new Passage("I don't think they're friendly!",undefined,true,target.name,target.avatar.svg('bust','surprise'),'left'));
				};
			};
		},
		source: function(pawn) {
			if (game.players[0].plotkeys.hellhoundCaveSpring == undefined) {
				game.players[0].plotkeys.hellhoundCaveSpring = true;
				var heroes = [];
				for (var hero of game.map.heroes) {
					if (hero !== pawn && hero.id !== 'hellpuppy') {
						heroes.push(hero);
					};
				};
				var p2 = heroes[heroes.length * Math.random() << 0];
				if (pawn.id == 'hellpuppy') {
					gamen.displayPassage(new Passage("...",undefined,true,pawn.name,pawn.avatar.svg(),'left'));
					gamen.displayPassage(new Passage("Yes, that's the spring where the underground river feeds this stream, pup.  Did you expect to find something?  What do you think this is, some game that rewards you for pushing into the furthest extremity of every map?",undefined,true,p2.name,p2.avatar.svg('bust','cocky'),'right'));
				} else {
					gamen.displayPassage(new Passage("...and this must be where the underground river feeds this stream.",undefined,true,pawn.name,pawn.avatar.svg('bust','sad'),'left'));
					gamen.displayPassage(new Passage("Well yeah.  Did you expect something... more?  What do you think this is, some game that rewards you for pushing into the furthest extremity of every map?",undefined,true,p2.name,p2.avatar.svg('bust','cocky'),'right'));
				};				
			};
		},
	}
};
missions.mission_silverAndGold = mission_silverAndGold;

missions.mission_northSilverVault = {title:'North Silver Vault'};
missions.mission_southSilverVault = {title:'South Silver Vault'};